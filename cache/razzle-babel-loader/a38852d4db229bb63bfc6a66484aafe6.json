{"ast":null,"code":"var _jsxFileName = \"I:\\\\developpement\\\\Js\\\\seiryu\\\\src\\\\pages\\\\AuthPages\\\\SignInPage\\\\SignInPage.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// CORE START\nimport React, { Suspense, useEffect } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { ErrorMessage } from '@hookform/error-message'; // UI START\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport history from \"@core/history\";\nimport { useMutation, useQuery } from \"react-query\";\nimport HttpClient from \"@core/httpClient\";\nimport * as yup from 'yup';\nimport { ROUTE_MAIN_LANDING, ROUTE_API_LOGIN_CHECK } from \"@core/routes\"; // CORE END\n// ASSETS START\n\nimport signinPageStyles from \"./SigninPageStyle\";\nimport { useTranslation } from \"react-i18next\"; // ASSETS END\n// UI END\n// CONFIG START\n\nvar loginSchema = yup.object().shape({\n  email: yup.string().email().required(),\n  password: yup.string().required()\n}); // CONFIG END\n// LINKED LOCAL MODULES START\n\nfunction Copyright() {\n  return __jsx(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, 'Copyright © ', __jsx(Link, {\n    color: \"inherit\",\n    href: \"https://material-ui.com/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, \"Drazah\"), ' ', new Date().getFullYear(), '.');\n} // LINKED LOCAL MODULES END\n// MAIN MODULE START\n\n\n_c = Copyright;\n\nvar SigninPage = function SigninPage() {\n  _s();\n\n  var classes = signinPageStyles();\n\n  var _useTranslation = useTranslation(['auth']),\n      t = _useTranslation.t;\n\n  var _useForm = useForm({\n    criteriaMode: \"all\"\n  }),\n      register = _useForm.register,\n      errors = _useForm.errors,\n      setError = _useForm.setError,\n      handleSubmit = _useForm.handleSubmit;\n\n  var loginAction = useMutation(function (loginParams) {\n    return HttpClient.post(ROUTE_API_LOGIN_CHECK, loginParams);\n  }, {\n    onSuccess: function onSuccess(response) {\n      if (response.status === 204) {\n        var location = {\n          pathname: ROUTE_MAIN_LANDING\n        };\n        history.push(location);\n      }\n    }\n  });\n\n  var onSubmit = function onSubmit(loginData) {\n    if (loginSchema.validate(loginData)) {\n      loginAction.mutate(loginData);\n    }\n  };\n\n  return __jsx(Grid, {\n    container: true,\n    component: \"main\",\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, __jsx(CssBaseline, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }), __jsx(Grid, {\n    item: true,\n    xs: false,\n    sm: 4,\n    md: 7,\n    className: classes.image,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 8,\n    md: 5,\n    component: Paper,\n    elevation: 6,\n    square: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: classes.paper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, __jsx(Avatar, {\n    className: classes.avatar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, __jsx(LockOutlinedIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  })), __jsx(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, t('auth.connexion')), __jsx(\"form\", {\n    className: classes.form,\n    onSubmit: handleSubmit(function (data) {\n      return onSubmit(data);\n    }),\n    noValidate: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, __jsx(TextField, {\n    error: !!errors.email,\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"email\",\n    label: \"Adresse Email\",\n    name: \"email\",\n    autoComplete: \"email\",\n    autoFocus: true,\n    inputRef: register({\n      required: \"Ce champs est obligatoire\",\n      pattern: {\n        value: /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/,\n        message: \"Ce n'est pas un format d'Email valide\"\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }), __jsx(ErrorMessage, {\n    errors: errors,\n    name: \"email\",\n    render: function render(_ref) {\n      var messages = _ref.messages;\n      var errorArray = [];\n\n      if (messages) {\n        for (var _i = 0, _Object$entries = Object.entries(messages); _i < _Object$entries.length; _i++) {\n          var message = _Object$entries[_i];\n          errorArray.push(message[1]);\n        }\n      }\n\n      return messages ? errorArray.map(function (message, key) {\n        return __jsx(\"p\", {\n          key: key,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 41\n          }\n        }, message);\n      }) : null;\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 25\n    }\n  }), __jsx(TextField, {\n    error: !!errors.email,\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    name: \"password\",\n    label: \"Password\",\n    type: \"password\",\n    id: \"password\",\n    autoComplete: \"current-password\",\n    inputRef: register({\n      required: \"Ce champs est obligatoire\"\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }), __jsx(ErrorMessage, {\n    errors: errors,\n    name: \"password\",\n    render: function render(_ref2) {\n      var messages = _ref2.messages;\n      var errorArray = [];\n\n      if (messages) {\n        for (var _i2 = 0, _Object$entries2 = Object.entries(messages); _i2 < _Object$entries2.length; _i2++) {\n          var message = _Object$entries2[_i2];\n          errorArray.push(message[1]);\n        }\n      }\n\n      return messages ? errorArray.map(function (message, key) {\n        return __jsx(\"p\", {\n          key: key,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 41\n          }\n        }, message);\n      }) : null;\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }), __jsx(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }, false === false ? 'Se connecter' : __jsx(CircularProgress, {\n    style: {\n      'color': 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 37\n    }\n  })), __jsx(Box, {\n    mt: 5,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, __jsx(Copyright, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 29\n    }\n  }))))));\n}; // MAIN MODULE END\n\n\n_s(SigninPage, \"eRwUQZ3VGU+EbeXYuSn1nQWDba8=\", false, function () {\n  return [useTranslation, useForm, useMutation];\n});\n\n_c2 = SigninPage;\nexport default SigninPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Copyright\");\n$RefreshReg$(_c2, \"SigninPage\");","map":{"version":3,"sources":["I:/developpement/Js/seiryu/src/pages/AuthPages/SignInPage/SignInPage.jsx"],"names":["React","Suspense","useEffect","useForm","ErrorMessage","Avatar","Button","CssBaseline","TextField","CircularProgress","Link","Paper","Box","Grid","LockOutlinedIcon","Typography","history","useMutation","useQuery","HttpClient","yup","ROUTE_MAIN_LANDING","ROUTE_API_LOGIN_CHECK","signinPageStyles","useTranslation","loginSchema","object","shape","email","string","required","password","Copyright","Date","getFullYear","SigninPage","classes","t","criteriaMode","register","errors","setError","handleSubmit","loginAction","loginParams","post","onSuccess","response","status","location","pathname","push","onSubmit","loginData","validate","mutate","root","image","paper","avatar","form","data","pattern","value","message","messages","errorArray","Object","entries","map","key","submit"],"mappings":"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","sourcesContent":["// CORE START\r\nimport React, {Suspense, useEffect} from 'react';\r\nimport {useForm} from \"react-hook-form\";\r\nimport {ErrorMessage} from '@hookform/error-message';\r\n\r\n// UI START\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Link from '@material-ui/core/Link';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Box from '@material-ui/core/Box';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport history from \"@core/history\";\r\nimport {useMutation, useQuery} from \"react-query\";\r\nimport HttpClient from \"@core/httpClient\";\r\nimport * as yup from 'yup';\r\nimport {ROUTE_MAIN_LANDING, ROUTE_API_LOGIN_CHECK} from \"@core/routes\";\r\n// CORE END\r\n\r\n// ASSETS START\r\nimport signinPageStyles from \"./SigninPageStyle\";\r\nimport {useTranslation} from \"react-i18next\";\r\n// ASSETS END\r\n// UI END\r\n\r\n// CONFIG START\r\nconst loginSchema = yup.object().shape({\r\n    email: yup.string().email().required(),\r\n    password: yup.string().required()\r\n});\r\n// CONFIG END\r\n\r\n// LINKED LOCAL MODULES START\r\nfunction Copyright() {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n            {'Copyright © '}\r\n            <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n                Drazah\r\n            </Link>{' '}\r\n            {new Date().getFullYear()}\r\n            {'.'}\r\n        </Typography>\r\n    );\r\n}\r\n\r\n// LINKED LOCAL MODULES END\r\n\r\n\r\n// MAIN MODULE START\r\nconst SigninPage = () => {\r\n\r\n    const classes = signinPageStyles();\r\n    const {t} = useTranslation(['auth']);\r\n\r\n    const {register, errors, setError, handleSubmit} = useForm({\r\n        criteriaMode: \"all\"\r\n    });\r\n\r\n    const loginAction = useMutation(\r\n        loginParams => {\r\n            return HttpClient.post(ROUTE_API_LOGIN_CHECK, loginParams);\r\n        }, {\r\n            onSuccess: (response) => {\r\n                if (response.status === 204) {\r\n                    const location = {\r\n                        pathname: ROUTE_MAIN_LANDING,\r\n                    };\r\n                    history.push(location)\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n    const onSubmit = (loginData) => {\r\n        if (loginSchema.validate(loginData)) {\r\n            loginAction.mutate(loginData);\r\n        }\r\n    };\r\n\r\n    return (\r\n\r\n        <Grid container component=\"main\" className={classes.root}>\r\n            <CssBaseline/>\r\n            <Grid item xs={false} sm={4} md={7} className={classes.image}/>\r\n            <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\r\n                <div className={classes.paper}>\r\n                    <Avatar className={classes.avatar}>\r\n                        <LockOutlinedIcon/>\r\n                    </Avatar>\r\n\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        {t('auth.connexion')}\r\n                    </Typography>\r\n\r\n                    <form className={classes.form} onSubmit={handleSubmit((data) => onSubmit(data))} noValidate>\r\n\r\n                        <TextField\r\n                            error={!!errors.email}\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            id=\"email\"\r\n                            label=\"Adresse Email\"\r\n                            name=\"email\"\r\n                            autoComplete=\"email\"\r\n                            autoFocus\r\n                            inputRef={register({\r\n                                required: \"Ce champs est obligatoire\",\r\n                                pattern: {\r\n                                    value: /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/,\r\n                                    message: \"Ce n'est pas un format d'Email valide\"\r\n\r\n                                }\r\n                            })}\r\n                        />\r\n                        <ErrorMessage\r\n                            errors={errors}\r\n                            name=\"email\"\r\n                            render={({messages}) => {\r\n                                const errorArray = [];\r\n                                if (messages) {\r\n                                    for (const message of Object.entries(messages)) {\r\n                                        errorArray.push(message[1]);\r\n                                    }\r\n                                }\r\n                                return messages\r\n                                    ? errorArray.map((message, key) => (\r\n                                        <p key={key}>{message}</p>\r\n                                    ))\r\n                                    : null;\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            error={!!errors.email}\r\n                            variant=\"outlined\"\r\n                            margin=\"normal\"\r\n                            required\r\n                            fullWidth\r\n                            name=\"password\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            autoComplete=\"current-password\"\r\n                            inputRef={register({\r\n                                required: \"Ce champs est obligatoire\",\r\n                            })}\r\n                        />\r\n                        <ErrorMessage\r\n                            errors={errors}\r\n                            name=\"password\"\r\n                            render={({messages}) => {\r\n                                const errorArray = [];\r\n                                if (messages) {\r\n                                    for (const message of Object.entries(messages)) {\r\n                                        errorArray.push(message[1]);\r\n                                    }\r\n                                }\r\n                                return messages\r\n                                    ? errorArray.map((message, key) => (\r\n                                        <p key={key}>{message}</p>\r\n                                    ))\r\n                                    : null;\r\n                            }}\r\n                        />\r\n\r\n                        <Button\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            className={classes.submit}\r\n                        >\r\n                            {\r\n                                (false === false) ? 'Se connecter' : (\r\n                                    <CircularProgress style={{'color': 'white'}}/>\r\n                                )\r\n                            }\r\n\r\n                        </Button>\r\n                        <Box mt={5}>\r\n                            <Copyright/>\r\n                        </Box>\r\n                    </form>\r\n                </div>\r\n            </Grid>\r\n        </Grid>\r\n\r\n    );\r\n};\r\n\r\n// MAIN MODULE END\r\n\r\n\r\nexport default SigninPage;"]},"metadata":{},"sourceType":"module"}